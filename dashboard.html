<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/maps/documentation/javascript/demos/demos.css">

    <style>
        /* Set black background color, white text and some padding */
        footer {
            background-color: #555;
            color: white;
            padding: 15px;
        }

        #map {
            height: 400px;
            width: 100%;
        }

        .panel-default {
            margin-left: 1%;
            margin-right: 1%;
        }

        .glyphicon-device-status {
            font-size: 30px;
            color: green;
        }

    </style>
</head>
<body>


<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <!--<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">-->
            <!--<span class="icon-bar"></span>-->
            <!--<span class="icon-bar"></span>-->
            <!--<span class="icon-bar"></span>-->
            <!--</button>-->
            <a class="navbar-brand" href="#">Ginger Works Hermes</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#">Messages</a></li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
                <li><a href="#"><span class="glyphicon glyphicon-user"></span> Settings</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container-fluid text-center">
    <div class="row">
        <div class="col-sm-2 panel panel-default">
            <div class="row panel-heading">
                <h3>Events</h3>
            </div>
            <div class="panel-body">
                <div class="alert alert-success fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
                    <p><strong>Connection Restored</strong></p>
                    People are looking at your profile. Find out who.
                </div>

                <div class="alert alert-warning fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
                    <p><strong>Connection Lost</strong></p>
                    Connection lost with: Rover-1
                </div>
            </div>

        </div>
        <div class="col-sm-4 panel panel-default">

            <div class="row panel-heading">
                <h3>Devices</h3>
            </div>
            <div class="panel-body">

                <div class="row">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4>GPS Tracker 1</h4>
                        </div>
                        <div class="panel-body">
                            <div class="col-sm-3">
                                <img src="images/gpstracker.png" class="img-circle" height="55" width="55" alt="Avatar">
                            </div>
                            <div class="col-sm-9">
                                <div class="row">
                                    <p align="left"><span
                                            class="glyphicon glyphicon-flash glyphicon-device-status"></span> 8 Hours of
                                        Battery available </p>

                                </div>
                                <div class="row">
                                    <p align="left"><span
                                            class="glyphicon glyphicon-ok-sign glyphicon-device-status"></span> All
                                        Systems Operational </p>

                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4>GPS Tracker </h4>
                        </div>
                        <div class="panel-body">
                            <div class="col-sm-3">
                                <img src="images/gpstracker.png" class="img-circle" height="55" width="55" alt="Avatar">
                            </div>
                            <div class="col-sm-9">
                                <div class="row">
                                    <p align="left"><span
                                            class="glyphicon glyphicon-flash glyphicon-device-status"></span> 8 Hours of
                                        Battery available </p>

                                </div>
                                <div class="row">
                                    <p align="left"><span
                                            class="glyphicon glyphicon-ok-sign glyphicon-device-status"></span> All
                                        Systems Operational </p>

                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4>GPS Tracker 1</h4>
                        </div>
                        <div class="panel-body">
                            <div class="col-sm-3">
                                <img src="images/gpstracker.png" class="img-circle" height="55" width="55" alt="Avatar">
                            </div>
                            <div class="col-sm-9">
                                <div class="row">
                                    <p align="left"><span
                                            class="glyphicon glyphicon-flash glyphicon-device-status"></span> 8 Hours of
                                        Battery available </p>

                                </div>
                                <div class="row">
                                    <p align="left"><span
                                            class="glyphicon glyphicon-ok-sign glyphicon-device-status"></span> All
                                        Systems Operational </p>

                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4>GPS Tracker 1</h4>
                        </div>
                        <div class="panel-body">
                            <div class="col-sm-3">
                                <img src="images/gpstracker.png" class="img-circle" height="55" width="55" alt="Avatar">
                            </div>
                            <div class="col-sm-9">
                                <div class="row">
                                    <p align="left"><span
                                            class="glyphicon glyphicon-flash glyphicon-device-status"></span> 8 Hours of
                                        Battery available </p>

                                </div>
                                <div class="row">
                                    <p align="left"><span
                                            class="glyphicon glyphicon-ok-sign glyphicon-device-status"></span> All
                                        Systems Operational </p>

                                </div>

                            </div>
                        </div>
                    </div>

                </div>
            </div>


        </div>
        <div class="col-sm-5 panel panel-default">
            <div class="row panel-heading">
                <h3>Device Details</h3>
            </div>
            <div class="panel-body">

                <div class="well">
                    <h3 align="left">Device Information</h3>
                </div>

                <div class="well">
                    <h3 align="left">Location</h3>
                    <div id="map"></div>
                    <script async defer
                            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVYK3iQrTq30MLqLO2j7YBqUM36S8Nm9Y&callback=initMap"></script>
                    <script>function initMap() {

                        var uluru = {lat: -25.363, lng: 131.044};
                        var map = new google.maps.Map(document.getElementById('map'), {zoom: 4, center: uluru});
                        var marker = new google.maps.Marker({position: uluru, map: map});


                    }</script>
                </div>

                



            </div>

        </div>
    </div>
</div>

<footer class="container-fluid text-center">
    <p>Footer Text</p>
</footer>


<script>
    function get_user_devices() {
        console.log("Sending get user devices");

        // cookies should be working, so we don't have to add an authorization header? If not uncomment this
        var base64encoded = "Basic" + " " + btoa("kaangoksal@gmai.com" + ":" + "pass-kaan");

        var data = JSON.stringify(false);
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (xhttp.readyState == 4 && xhttp.status == 200) {
                console.log(" Response : " + xhttp.responseText);
                var jsonfile = JSON.parse(xhttp.responseText);
                var devices_array = jsonfile["devices"];




                for (var i = 0; i<devices_array.length; i++ ) {
                    // maybe declare these guys outside
                    var device_name = devices_array[i]["name"];
                    var device_power = devices_array[i]["power"];
                    var device_last_ping = devices_array[i]["last_ping"];

                    var device_type = devices_array[i]["type"];

                    var device_state = devices_array[i]["type"];


                }

                if (jsonfile["code"] == 31) {
                    alert("Login Failed " + jsonfile["message"]);
                }
                else {
                    localStorage.setItem("email", document.getElementsByName('email')[0].value);
                    localStorage.setItem("username", jsonfile['username']);
                    localStorage.setItem("account_type", jsonfile['account_type']);
                    if (localStorage.getItem("account_type") == "admin") {
                        window.location.replace("admin-dashboard.html");
                    } else if (localStorage.getItem("account_type") == "user") {
                        window.location.replace("dashboard.html");
                    } else {
                        window.location.replace("dashboard.html");
                    }
                }
            }
        };
        xhttp.open("POST", "http://kaangoksal.com:5001/login", true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.setRequestHeader("Authorization", base64encoded);
        xhttp.send(data);
        console.log("Sent Request");
    }
</script>

</body>
</html>
